analise_de_entrada_task:
  description: >
    Analisar a entrada: {topic}
    
    Classificar em uma das categorias:
    1. Lista de artefatos t√©cnicos ‚Üí Delegar para Agente de Artefatos de Tecnologia
    2. Tudo que n√£o for artefato t√©cnico ou c√≥digo de programa√ß√£o. ‚Üí Delegar para Agente de boas-vindas  
    3. C√≥digo de programa√ß√£o ‚Üí Delegar para Analista de Codigo
    
    IMPORTANTE: Ap√≥s a classifica√ß√£o, gerar APENAS a decis√£o de roteamento no formato JSON.
  expected_output: >
    Resposta em formato JSON v√°lido identificando o agente apropriado:
    Exemplos:
    { "agente": "Agente de Artefatos de Tecnologia", "saida": Delegar para Agente de Artefatos de Tecnologia" }
    { "agente": "Agente de boas-vindas", "saida": "Entrada √© uma sauda√ß√£o ou n√£o cont√©m conte√∫do t√©cnico" }
    { "agente": "Analista de Codigo", "saida": Delegar para Analista de Codigo }
  agent: agente_de_entrada

analise_boas_vindas_task:
  description: >
    Responda SEMPRE que voc√™ IA de moderniza√ß√£o de TI  e que necessita de uma entrada t√©cnica para analisar.
    Use uma linguagem simples e clara.
    Mantenha um tom positivo e encorajador, incentivando os usu√°rios a continuarem a intera√ß√£o.
    Seja breve e direto ao ponto, garantindo que sua resposta seja f√°cil de entender e agrad√°vel.
  expected_output: >
    USE SEMPRE essa Sa√≠da:
    { "agente": "Agente de boas-vindas", "saida": "
    üöÄ Bem-vindo √† IAM - IA de Moderniza√ß√£o de Sistemas üß†
      
      Bom dia, sou seu assistente inteligente para avalia√ß√£o de artefatos de TI com foco em moderniza√ß√£o tecnol√≥gica.
      Minha miss√£o √© analisar c√≥digos, configura√ß√µes, documentos e demais artefatos do seu sistema, e gerar um relat√≥rio detalhado que mensura o grau de modernidade, com base em crit√©rios como: 
      
        - Uso de tecnologias atuais e sustent√°veis. \n
        - Ader√™ncia a boas pr√°ticas de arquitetura e seguran√ßa. \n
        - N√≠vel de automa√ß√£o e integra√ß√£o. \n
        - Escalabilidade e modularidade. \n
        - Compatibilidade com ambientes em nuvem e DevOps. \n

    üì• Para come√ßar, envie uma lista de artefatos ou c√≥digo-fonte do sistema que deseja avaliar."}
    O relat√≥rio incluir√° observa√ß√µes t√©cnicas e sugest√µes de melhoria para uma melhor pontua√ß√£o do Sistema. 
    Os "\n" sinalizam quebras de linha.
  agent: agente_boas_vindas
  context: 
    - analise_de_entrada_task

analise_codigo_task:
  description: >
    *Entrada* = {topic}
    Identifique a linguagem de programa√ß√£o, frameworks e pr√°ticas de desenvolvimento utilizadas.
    Avalie a modernidade do c√≥digo com base em crit√©rios como:
      - Uso de vers√µes recentes da linguagem
      - Ado√ß√£o de frameworks modernos
      - Implementa√ß√£o de testes automatizados
      - Ader√™ncia a padr√µes de codifica√ß√£o atuais
      - Utiliza√ß√£o de pr√°ticas de seguran√ßa no c√≥digo
    Forne√ßa uma an√°lise detalhada e t√©cnica do c√≥digo, destacando pontos fortes e √°reas para melhoria.
  expected_output: >
    {"agente": "Analista de Codigo", "saida": "üîç An√°lise T√©cnica do C√≥digo:\n\nüìå Linguagem de Programa√ß√£o Identificada: Python 3.11\nüì¶ Frameworks Utilizados:\n  - FastAPI (para constru√ß√£o de APIs modernas e ass√≠ncronas)\n  - Pydantic (valida√ß√£o de dados)\n  - pytest (testes automatizados)\n‚úÖ Avalia√ß√£o de Modernidade\n  | Crit√©rio | Avalia√ß√£o |\n  |----------|----------|\n  | **Vers√£o da linguagem** | Utiliza Python 3.11, vers√£o est√°vel e recente |\n  | **Frameworks modernos** | FastAPI e Pydantic s√£o amplamente adotados |\n  | **Testes automatizados** | Presen√ßa de testes com pytest |\nüß† Pontos Fortes\n  Uso de tipagem est√°tica, estrutura modular clara\n‚ö†Ô∏è √Åreas para Melhoria\n  Seguran√ßa: aus√™ncia de autentica√ß√£o/autoriza√ß√£o\nüìà Recomenda√ß√µes\n  Implementar autentica√ß√£o JWT, adicionar docstrings"}
    IMPORTANTE: 
    - A resposta deve ser um JSON v√°lido com os campos "agente" e "saida"
    - O campo "saida" deve conter a an√°lise completa como string
    - Use \n para quebras de linha na an√°lise
    - Caso n√£o haja c√≥digo na entrada, use: {"agente": "Analista de Codigo", "saida": "Nenhum c√≥digo identificado para an√°lise"}
  agent: agente_analista_codigo

categorizar_artefatos_task:
  description: >
    Recebe uma lista de artefatos t√©cnicos, tecnologias, frameworks ou linguagens de programa√ß√£o.
    Identifique e Categorize os artefatos da *ENTRADA* nas seguintes categorias:
        - Linguagem de Programa√ß√£o
        - Arquitetura de Sistemas
        - Infraestrutura
        - Banco de Dados
        - DevSecOps / Governan√ßa
      Se houver vers√£o do artefato, inclua-a.
      SEMPRE deve seguir ORDEM de CATEGORIA
      N√£o gere recomenda√ß√µes. N√£o forne√ßa explica√ß√µes.
      A sa√≠da deve ser uma tabela de categoriza√ß√£o conforme o exemplo abaixo:
        Uma linha por categoria, mesmo que n√£o se aplique.
        Use "(Nenhum)" na coluna de Artefatos se a categoria n√£o se aplicar.
  expected_output: >
    Por Exemplo:
    Entrada: 
      S659	N√ÉO		DB2 S659	N√ÉO		SQL SERVER 2019 S659	N√ÉO		SQL SERVER 2016 S659	N√ÉO		DB2 S659	N√ÉO		SQL SERVER 2019
      S659	N√ÉO		SQL SERVER 2016 S659	N√ÉO	Java	Jboss S659	N√ÉO	React/ReactNative	nginx S659	N√ÉO	Java	WebSphere v.8.5
      S659	N√ÉO	Java	Java 11 S659	N√ÉO	Java	Java 8 S659	N√ÉO	React/ReactNative	TypeScript
    Sa√≠da:   
    {"agente": "Agente de Artefatos de Tecnologia", "saida": "\n
    | Categoria | Artefatos |\n
    |---------------------------|----------|\n
    | Linguagem de Programa√ß√£o | Java 11, Java 8, TypeScript |\n
    | Arquitetura de Sistemas | Jboss (servidor de aplica√ß√µes Java EE), WebSphere v.8.5 (servidor de aplica√ß√µes da IBM), nginx (servidor web e proxy reverso, usado com React/ReactNative) |\n
    | Infraestrutura | nginx, Jboss e WebSphere |\n
    | Banco de Dados | DB2, SQL Server 2016, SQL Server 2019 |\n
    | DevSecOps / Governan√ßa | (Nenhum) |"}
    
    Outro Exemplo:
    {"agente": "Agente de Artefatos de Tecnologia", "saida": "\n
    | Categoria | Artefatos |\n
    |---------------------------|----------|\n
    | Linguagem de Programa√ß√£o | .Net 8, Java 17+, Python 3.11+ |\n
    | Arquitetura de Sistemas | Microservices, Serverless |\n
    | Infraestrutura | AWS, Azure, Docker, Kubernetes |\n
    | Banco de Dados | PostgreSQL, NoSQL |\n
    | DevSecOps / Governan√ßa | Terraform, Ansible, GitOps |"}
    
    
    IMPORTANTE: 
    - A resposta deve ser um JSON v√°lido com os campos "agente" e "saida"
    - O campo "saida" deve conter a tabela markdown como string
    - Use \n para quebras de linha na tabela
    - Mantenha sempre as 5 categorias na ordem especificada
    - Use "(Nenhum)" se n√£o houver artefatos para uma categoria
  agent: agente_categorizador_de_artefatos
  context: 
    - analise_de_entrada_task

analisar_linguagem_task:
  description: >
    Somente Analisar se houver dados do Categorizador de Artefatos.
    Analisar SOMENTE a categoria *Linguagem de programa√ß√£o* e avaliar sua modernidade e maturidade.
    Se a categoria possuir campo vazio ou "(Nenhum)", responda que n√£o h√° linguagem para analisar.
    Considere os seguintes crit√©rios para a avalia√ß√£o:
        A vers√£o √© LTS?
        Ainda tem suporte? 
        √â uma linguagem moderna?
        Possui bibliotecas/frameworks atualizados?
        H√° evid√™ncias de testes automatizados?
        H√° c√≥digo legado em refatora√ß√£o?
    Sugira melhorias ou moderniza√ß√µes se necess√°rio.
    Confirme se a vers√£o da linguagem ainda √© suportada.
    
    Segunda tarefa: Analise o sal√°rio dos desenvolvedores que utilizam essa linguagem.
      No banco de dados, identifique quem √© o que ganha mais e o que ganha menos.
      Por fim, calcule a media dos salarios.
  expected_output: >
    Exemplo de an√°lise para Java 11:
    **Java 11**
    ‚úÖ **Modernidade e Suporte**:
    - Java 11 √© uma vers√£o est√°vel e amplamente utilizada em ambientes corporativos.
    - Ainda possui suporte oficial da Oracle e da comunidade OpenJDK.
    üìö **Bibliotecas e Frameworks**:
    - O projeto utiliza frameworks modernos como **Spring Boot 2.7**, que √© compat√≠vel com Java 11.
    - As depend√™ncias est√£o atualizadas via Maven, com controle de vers√µes centralizado.
    üß™ **Testes Automatizados**:
    - H√° evid√™ncias de testes automatizados com **JUnit 5** e cobertura de c√≥digo via **JaCoCo**.
    - O pipeline CI inclui etapas de teste e valida√ß√£o antes do deploy.
    üõ†Ô∏è **C√≥digo Legado e Refatora√ß√£o**:
    - Algumas classes antigas ainda utilizam padr√µes do Java 8, mas est√£o sendo gradualmente refatoradas para aproveitar recursos como `var`, `HttpClient` e melhorias de desempenho.
    üí° **Sugest√µes de melhoria**:
    - Avaliar a migra√ß√£o para **Java 17 LTS**, que oferece melhorias de performance e novos recursos de linguagem.
    - Adotar ferramentas de an√°lise est√°tica como **SonarQube** para refor√ßar a qualidade do c√≥digo.
    - Expandir os testes automatizados para incluir testes de integra√ß√£o com banco de dados e APIs externas.
  agent: analista_de_artefatos_linguagem


analisar_bd_task:
  description: >
    Somente Analisar se houver dados do Categorizador de Artefatos.
    Analisar **SOMENTE** a categoria *Banco de Dados* e avaliar sua modernidade, suporte, seguran√ßa e desempenho.
    Se a categoria possuir campo vazio ou "(Nenhum)", responda que n√£o h√° banco de dados para analisar.
    Considere os seguintes crit√©rios para a avalia√ß√£o:
        A vers√£o √© atual e suportada?
        Possui mecanismos de replica√ß√£o e backup?
        Quais pr√°ticas de seguran√ßa s√£o aplicadas (criptografia, controle de acesso)?
        H√° evid√™ncias de monitoramento e tuning de desempenho?
    Sugira melhorias ou moderniza√ß√µes se necess√°rio.
  expected_output: >
    Exemplo de an√°lise para PostgreSQL 14:
    **PostgreSQL 14**
    ‚úÖ **Modernidade e Suporte**:
    - A vers√£o 14 do PostgreSQL √© est√°vel e suporte encerra-se em novembro de 2026.
    - H√° suporte ativo da comunidade e documenta√ß√£o oficial.
    üîÑ **Replica√ß√£o e Backup**:
    - O ambiente utiliza **replica√ß√£o ass√≠ncrona** entre servidores para alta disponibilidade.
    - Backups s√£o realizados diariamente via `pg_dump` e armazenados em ambiente seguro.
    üîê **Seguran√ßa**:
    - A base de dados utiliza **criptografia em repouso** via LUKS no disco.
    - O acesso √© controlado por roles e permiss√µes espec√≠ficas.
    - Autentica√ß√£o via LDAP integrada ao AD corporativo.
    üìà **Desempenho e Monitoramento**:
    - Ferramentas como **pg_stat_statements** e **Prometheus + Grafana** s√£o utilizadas para monitoramento.
    - H√° evid√™ncias de tuning de queries e √≠ndices com base em an√°lise de planos de execu√ß√£o.
    üí° **Sugest√µes de melhoria**:
    - Avaliar a ado√ß√£o de **PostgreSQL 15 ou superior** para recursos avan√ßados de paralelismo.
    - Implementar **backup incremental** com ferramentas como `barman` ou `pgBackRest`.
    - Refor√ßar a auditoria de acessos com logs centralizados.
    Exemplo de an√°lise sem banco de dados:
      "N√£o h√° evid√™ncias de banco de dados para analisar."
  agent: analista_de_artefatos_banco_dados

resumir_resultados_task:
  description: >
    Analisar os resultados das tarefas anteriores e gerar um relat√≥rio t√©cnico consolidado:
      Se houver codigo de programa√ß√£o para analisar, gere a an√°lise do c√≥digo.
      Se houver artefatos t√©cnicos para categorizar, gere a tabela do categorizador_de_artefatos_task e gere um relat√≥rio t√©cnico consolidado.
  expected_output: >
    Exemplo de t√≠tulo com nome do sistema:
      # Relat√≥rio T√©cnico de An√°lise - Sistema S123
  
    Exemplo de t√≠tulo sem nome do sistema:
      # Relat√≥rio T√©cnico de An√°lise
    Exemplo de tabela:
    | Categoria                 | Artefatos |
    |---------------------------|----------|
    | Linguagem de Programa√ß√£o  | .Net 8, Java 17+, Python 3.11+ |
    | Arquitetura de Sistemas   | Microservices, Serverless |
    | Infraestrutura            | AWS, Azure, Docker, Kubernetes |
    | Banco de Dados            | PostgreSQL, NoSQL |
    | DevSecOps / Governan√ßa    | Terraform, Ansible, GitOps |
    Exemplo de relat√≥rio:
    ## An√°lise de Linguagem de Programa√ß√£o
    (Conte√∫do gerado pelo agente analista_de_artefatos_linguagem)  
    ## An√°lise de Banco de Dados
    (Conte√∫do gerado pelo agente analista_de_artefatos_banco_dados)  
    Certifique-se de que o relat√≥rio seja claro, conciso e tecnicamente preciso,
    adequado para um p√∫blico t√©cnico. Use uma linguagem formal e t√©cnica, evitando jarg√µes desnecess√°rios. 
  agent: especialista_integracao
  context:
    - analisar_linguagem_task
    - analisar_bd_task
